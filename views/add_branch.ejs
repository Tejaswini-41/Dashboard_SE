<!DOCTYPE html>
<html lang="en">
  <%- include("partials/head.ejs") %>
  <body>
    <%- include("partials/header.ejs") %>

    <div class="container mt-5">
      <h1 class="text-center text-primary mb-4">Add Branch & Intake</h1>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="card shadow-lg p-3 mb-5 bg-white rounded">
            <div class="card-body">
              <form id="addBranchForm">
                <div class="mb-3">
                  <label for="college" class="form-label">College Name:</label>
                  <select class="form-select" id="college" name="college" required>
                    <option value="" disabled selected>Select College</option>
                    <option value="VIIT">VIIT</option>
                    <option value="VIT">VIT</option>
                    <option value="VU">VU</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="branch" class="form-label">Branch Name:</label>
                  <input type="text" class="form-control" id="branch" name="branch" placeholder="Enter branch name" required>
                </div>
                <div class="mb-3">
                  <label for="intake" class="form-label">Intake:</label>
                  <input type="number" class="form-control" id="intake" name="intake" placeholder="Enter intake number" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Add Branch & Intake</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%- include("partials/footer.ejs") %>

    <script>
      document.getElementById('addBranchForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the form from submitting normally
        
        // Submit the form using AJAX
        fetch('/manage-branches/add', {
          method: 'POST',
          body: new FormData(this)
        })
        .then(response => response.text())
        .then(html => {
          document.body.innerHTML = html; // Replace the current document with the response
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Failed to add branch');
        });
      });
    </script>
  </body>
</html>
